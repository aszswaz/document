# gdb调试

```bash
# 编译程序，-g代表带有调试信息的编译
$ gcc -g demo.c -o demo
# 运行程序
$ gdb demo
```

## 运行

| 指令 | 说明                                    | 用法         |
| ---- | --------------------------------------- | ------------ |
| run  | 运行程序，run xxx：传送命令行参数给程序 | run、run xxx |



## 查看代码

| 指令 | 说明                                   | 用法           |
| ---- | -------------------------------------- | -------------- |
| list | 查看代码，list xxx：查看指定位置的代码 | list、list xxx |



## 断点

| 指令             | 说明                                                 | 用法                                          |
| ---------------- | ---------------------------------------------------- | --------------------------------------------- |
| break            | 在指定行设置断点，行号通过list得到                   | break xxx                                     |
| info breakpoints | 输出所有断点信息                                     | info breakpoints                              |
| delete           | 删除指定序号的断点，断点序号通过info breakpoints得到 | delete 1 或者 delete 1-10（指定序号范围删除） |
| continue         | 运行到下一个断点                                     | continue                                      |

## 变量

| 指令                | 说明                                           | 用法                |
| ------------------- | ---------------------------------------------- | ------------------- |
| print               | 打印变量，参数可以是变量名、内存地址           | print xxx           |
| set print pretty on | 当print输出结构体的时候，进行格式化            | set print pretty on |
| ptype               | 输出变量的详细信息（变量的类型，结构的成员等） | ptype xxx           |
| set var name=xxx    | 修改变量的值，name是变量名                     | set var xxx=xxx     |

## 宏

| 指令         | 说明                                       | 示例             |
| ------------ | ------------------------------------------ | ---------------- |
| print        | 输出宏的变量                               | print DEMO       |
| macro expand | 展开宏函数（查看宏函数替换为代码后的效果） | macro DEMO(demo) |

